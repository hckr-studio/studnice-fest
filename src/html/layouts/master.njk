{%- from 'macros/helpers.njk' import sprite, spriteTarget -%}
<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>{% block title %}{{ title }}{% endblock %}</title>
  <meta http-equiv="delegate-ch" content="sec-ch-width https://res.cloudinary.com; sec-ch-dpr https://res.cloudinary.com; sec-ch-viewport-width https://res.cloudinary.com;">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% include "shared/styles.njk" %}
  <link rel="preconnect" href="https://res.cloudinary.com">
  <link rel="preconnect" href="https://www.googletagmanager.com">
  <link rel="preconnect" href="https://unpkg.com">
  <link rel="preconnect" href="https://api.mapy.cz">
  <link rel="stylesheet" href="{{ 'index.css' | assetUrl('stylesheets') }}">
  <link rel="manifest" href="{{ 'manifest.json' | assetUrl('static') }}">
  {% include "shared/app-icons.html" %}
  {% block head %}{% endblock %}
  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
      var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
      j.async = true;j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-TB6TV66');</script>
  <!-- End Google Tag Manager -->
</head>
<body vocab="https://schema.org" typeof="Festival">
<!-- Google Tag Manager (noscript) -->
<noscript>
  <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TB6TV66" height="0" width="0"
          style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->

<link property="eventStatus" href="https://schema.org/EventScheduled"/>
<header>
  <h1 property="name">
    {% set logoId = "logo" %}
    {% include "shared/logo.svg" %}
  </h1>
  <div>
    <p class="header__time">
      <time property="startDate" datetime="2024-07-26">26.</time>
      -
      <time property="endDate" datetime="2024-07-27">27.&nbsp;7.&nbsp;2024</time>
    </p>
    <p class="header__location" property="location">Cihelka, Hlinsko v Čechách</p>
  </div>
  <nav>
    <button popovertarget="menu">Menu
      <svg xmlns="http://www.w3.org/2000/svg" width="40" height="16" viewBox="0 0 40 16" fill="none">
        <rect y="0.482178" width="40" height="1.65248" fill="var(--text-color)"/>
        <rect x="10" y="7.09204" width="30" height="1.65248" fill="var(--text-color)"/>
        <rect x="20" y="13.7019" width="20" height="1.65248" fill="var(--text-color)"/>
      </svg>
    </button>

    <div id="menu" popover>
      <ul>
        <li><a href="/">Úvod</a></li>
        <li>Novinky</li>
        <li>Info</li>
        <li>Kapely</li>
        <li>Vstupenky</li>
        <li>Časový harmonongram</li>
        <li><a href="#mapa">Mapa</a></li>
        <li><a href="#kontakt">Kontakt</a></li>
      </ul>
    </div>
  </nav>
</header>
{% block content %}{% endblock %}
<footer>
  <section id="mapa">
    <header>
      <h2>Mapa</h2>
    </header>
    <p>Studnice Fest 2024&nbsp;se bude konat na tradičním místě, v&nbsp;areálu Cihelka
      <strong>(A)</strong> na okraji Hlinska v&nbsp;Čechách. V&nbsp;těsné blízkosti
      areálu budou vyhrazené prostory k&nbsp;parkování <strong>(P)</strong>
      i&nbsp;stanování <strong>(S)</strong>.</p>
    <div id="map" class="smap"></div>
  </section>
  <hr>
  <section class="footer__contacts">
    <div id="kontakt">
      <h2>Kontakty</h2>
      <p>Potřebujete kontaktovat pořadatele?</p>
    </div>
    <div>
      <h3>Jakub Balada</h3>
      <p><a
          href="mailto:jakub.balada&#64;studnicefest.cz">jakub.balada&#64;<!-- -->studnicefest.cz</a></p>
      <h3>Pavel Kosina</h3>
      <p><a href="tel:+420777886838">+420&nbsp;777&nbsp;886&nbsp;838</a><br>
        <a href="mailto:pavel.kosina&#64;studnicefest.cz">pavel.kosina&#64;<!-- -->studnicefest.cz</a></p>
    </div>
    <div>
      <div>
        <a href="https://www.kudyznudy.cz/?utm_source=kzn&amp;utm_medium=partneri_kzn&amp;utm_campaign=banner"
           title="Kudyznudy.cz - tipy na výlet" target="_blank">
          <img src="https://www.kudyznudy.cz/getmedia/849ee326-f95a-43ce-812c-be9c5817c81e/KzN_banner_234x60.jpg.aspx"
               width="234" height="60" alt="Kudyznudy.cz - tipy na výlet" loading="lazy">
        </a>
      </div>
      <div>
        <small class="partner">Studnice Fest podporuje Pardubický kraj</small><br>
        <a href="https://www.pardubickykraj.cz/">
          <img src="{{ "pardubicky-kraj.png" | assetUrl("images") }}" width="226" height="50" alt="Pardubický kraj" loading="lazy"></a>
      </div>
    </div>
    <div></div>
  </section>
  <p>© 2017 - {{ currentYear }} Eupathia, z.s.; Web vytvořilo <a href="https://hckr.studio/">hckr.studio</a></p>
</footer>
{% block javascript %}
{% endblock %}
<script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
        integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin defer></script>
<script type="module">
  import { html } from "https://unpkg.com/uhtml@4.5.9/node.js";

  document.head.appendChild(html`
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
          integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin>`);

  const API_KEY = "S9n6dfE_8AfjsNvRxSwAmFV4-1z5tfk5W7IUajp2D3I";
  const map = L.map("map", {
    center: [49.752936007489765, 15.930369570851326],
    zoom: 16
  });
  L.tileLayer(`https://api.mapy.cz/v1/maptiles/outdoor/256/{z}/{x}/{y}?apikey=${API_KEY}`, {
    minZoom: 0,
    maxZoom: 19,
    detectRetina: true,
    attribution: `<a href="https://api.mapy.cz/copyright" target="_blank">&copy; Seznam.cz a.s. a další</a>`,
  }).addTo(map);
  const LogoControl = L.Control.extend({
    options: { position: "bottomleft" },
    onAdd(map) {
      return html`
        <div>
          <a href="https://mapy.cz/" target="_blank" @click=${e => e.stopPropagation()}>
            <img alt="Mapy.cz" src="https://api.mapy.cz/img/api/logo.svg" loading="lazy"></a>
        </div>
      `;
    },
  })
  new LogoControl().addTo(map);
  const poiArealIcon = L.icon({
    iconUrl: "{{ "poi-areal.svg" | assetUrl("images") }}",
    iconSize: [37, 46],
    iconAnchor: [18, 38],
  });
  L.marker([49.753234071335086, 15.930165722966194], { alt: "A", title: "Areál Cihelka" , icon: poiArealIcon}).addTo(map);

  const poiParkingIcon = L.icon({
    iconUrl: "{{ "poi-parking.svg" | assetUrl("images") }}",
    iconSize: [37, 46],
    iconAnchor: [18, 38],
  });
  L.marker([49.7526861, 15.9341575], { alt: "P", title: "Parkoviště", icon: poiParkingIcon }).addTo(map);

  const poiTentsIcon = L.icon({
    iconUrl: "{{ "poi-tents.svg" | assetUrl("images") }}",
    iconSize: [37, 46],
    iconAnchor: [18, 38],
  });
  L.marker([49.7529775, 15.9336425], { alt: "S", title: "Stanování", icon: poiTentsIcon }).addTo(map);
</script>
{{ spriteTarget() }}
</body>
</html>
